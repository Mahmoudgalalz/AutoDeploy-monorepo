- name: upgrade and update packages
  apt:
    update_cache: yes
    upgrade: yes

- name: install nodejs
  apt:
    name: nodejs
    state: present

- name: install npm
  apt:
    name: npm
    state: present

- name: install pm2
  npm:
    name: pm2
    global: yes

- name: check envirnoment varible
  debug:
    msg: "{{ item }}"
  with_items:
    - "{{ TYPEORM_CONNECTION }}"
    - "{{ TYPEORM_ENTITIES }}"
    - "{{ TYPEORM_HOST }}"
    - "{{ TYPEORM_PORT }}"
    - "{{ TYPEORM_USERNAME }}"
    - "{{ TYPEORM_PASSWORD }}"
    - "{{ TYPEORM_DATABASE }}"
    - "{{ TYPEORM_MIGRATIONS }}"
    - "{{ TYPEORM_MIGRATIONS_DIR }}"